<mvc:View
    xmlns:core="sap.ui.core"
    controllerName="project1.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
>
    <Page>
        <IconTabBar
            id="textBar"
            class="sapUiResponsivePaddings"
            select=".onChangeTabIconTabBar"
            selectedKey="{viewModel>/selectedTab}"
        >
            <items>
                <IconTabFilter text="{i18n>jsonModel}" key="JSONModel">
                    <Table
                        id="bookTable"
                        mode="MultiSelect"
                        items="{
                                path: 'Book>/books'
                            }"
                        selectionChange=".onTableItemSelected"
                        >
                        <headerToolbar>
                            <Toolbar>
                                <Title text="{i18n>bookList}" />
                                <Button
                                    text="{i18n>addRecord}"
                                    press=".onOpenAddRecordDialog"
                                />
                                <Button
                                    text="{i18n>deleteRecord}"
                                    press=".onOpenDeleteDialog"
                                    enabled="{viewModel>/enableDeleteBtn}"
                                />

                                <Input
                                    id="searchInput"
                                    width="40%"
                                />

                                <Select
                                    id="genreSelect"
                                    items="{
                                        path: 'viewModel>/genres'
                                    }"
                                    width="10%"
                                >
                                    <core:Item
                                        text="{viewModel>key}"
                                        key="{viewModel>text}"
                                    />
                                </Select>
                                <Button
                                    text="{i18n>filter}"
                                    press=".onApplyFilters"
                                />
                            </Toolbar>
                        </headerToolbar>
                        <columns>
                            <Column>
                                <Text text="{i18n>nameColumn}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>authorColumn}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>genreColumn}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>releaseDateColumn}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>availableColumn}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>actionColumn}" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <HBox>
                                        <Text
                                            text="{Book>name}"
                                            visible="{= ${viewModel>/titleEdit/id} !== ${Book>id} ? true : ${viewModel>/titleEdit/isVisible} ? false : true }"
                                        />
                                        <Input
                                            value="{Book>name}"
                                            visible="{= ${viewModel>/titleEdit/isVisible} &amp;&amp; ${viewModel>/titleEdit/id} === ${Book>id} }"
                                        />
                                    </HBox>
                                    <HBox>
                                        <Text text="{Book>author}" />
                                    </HBox>
                                    <HBox>
                                        <Text text="{Book>genre}" />
                                    </HBox>
                                    <HBox>
                                        <Text
                                            core:require="{
                                                Formatter: 'project1/model/formatter'
                                            }"
                                                            text="{
                                                path: 'Book>releasedate',
                                                formatter: 'Formatter.formatDate.bind($controller)'
                                            }"
                                        />
                                    </HBox>
                                    <HBox>
                                        <Text
                                            text="{Book>availablequantity}"
                                        />
                                    </HBox>
                                    <HBox>
                                        <Button
                                            text="{= ${viewModel>/titleEdit/isVisible} ? ${viewModel>/titleEdit/id} === ${Book>id} ? 'Save Title' : 'Edit Title'  : 'Edit Title'}"
                                            press=".onEditTitle"
                                        />
                                    </HBox>
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </IconTabFilter>
                <IconTabFilter text="{i18n>odataV2}" key="V2Model">
                    <Table
                        id="productTable"
                        mode="MultiSelect"
                        items="{
                        path: 'ODataV2>/Products',
                        parameters: {
                            expand: 'Supplier'
                        }
                    }"
                        selectionChange=".onTableItemSelected"
                    >
                        <headerToolbar>
                            <Toolbar>
                                <Button
                                    text="{i18n>addRecord}"
                                    press=".onOpenAddV2RecordFragment"
                                />
                                <Button
                                    text="{i18n>deleteRecord}"
                                    press=".onDeleteRecordButtonClick"
                                    enabled="{viewModel>/enableDeleteBtn}"
                                />
                                <ToolbarSeparator />
                                <Input
                                    id="searchField"
                                    liveChange=".onInputSearch"
                                    placeholder="{i18n>searchFieldPlaceholder}"
                                    width="60%"
                                />
                                <ToolbarSeparator />

                                <ComboBox
                                    id="sorterSelection"
                                    selectionChange=".onSorterSelect"
                                    placeholder="Please select column"
                                >
                                    <items>
                                        <core:Item
                                            key="Name"
                                            id="Name"
                                            text="{i18n>products}"
                                        />
                                        <core:Item
                                            key="Description"
                                            id="description"
                                            text="{i18n>description}"
                                        />
                                        <core:Item
                                            key="DeleaseDate"
                                            id="releaseDate"
                                            text="{i18n>releaseDate}"
                                        />
                                        <core:Item
                                            key="DiscontiniueDate"
                                            id="discontinuedDate"
                                            text="{i18n>discontinuedDate}"
                                        />
                                        <core:Item
                                            key="Rating"
                                            id="rating"
                                            text="{i18n>rating}"
                                        />
                                        <core:Item
                                            key="Price"
                                            id="price"
                                            text="{i18n>price}"
                                        />
                                    </items>
                                </ComboBox>
                            </Toolbar>
                        </headerToolbar>
                        <columns>
                            <Column>
                                <Text text="{i18n>products}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>description}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>releaseDate}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>discontinuedDate}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>rating}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>price}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>actionColumn}" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem
                            type="Navigation"
                            press=".onNavigateToProductPage"
                            >
                                <HBox>
                                    <Text text="{ODataV2>Name}" />
                                </HBox>
                                <HBox>
                                    <Text text="{ODataV2>Description}" />
                                </HBox>
                                <HBox>
                                    <Text text="{ODataV2>ReleaseDate}" />
                                </HBox>
                                <HBox>
                                    <Text text="{ODataV2>DiscontinuedDate}" />
                                </HBox>
                                <HBox>
                                    <Text text="{ODataV2>Rating}" />
                                </HBox>
                                <HBox>
                                    <Text text="{ODataV2>Price}" />
                                </HBox>
                                <HBox>
                                    <Button
                                        text="edit"
                                        press=".onOpenEditV2ModelRecord"
                                        app:recordId="{ODataV2>ID}"
                                    />
                                </HBox>
                            </ColumnListItem>
                        </items>
                    </Table>
                </IconTabFilter>
                <IconTabFilter text="{i18n>odataV4}" key="V4Model" >
                    <Table
                        id="V4dataTable"
                        mode="MultiSelect"
                        items="{
                            path: 'ODataV4>/Products',
                            parameters: {
                                $count: true,
                                $expand: 'Supplier',
                                $$updateGroupId: 'newEntityCreation'
                            }
                        }"
                        selectionChange=".onTableItemSelected"
                    >
                    <headerToolbar>
                        <Toolbar>
                            <Button
                                text="{i18n>addRecord}"
                                press=".onOpenAddV4RecordDialog"
                            />
                            <Button
                                text="{i18n>deleteRecord}"
                                press=".onOpenDeleteV4RecordFragment"
                                enabled="{viewModel>/enableDeleteBtn}"
                            />
                            <ToolbarSeparator />
                        </Toolbar>
                    </headerToolbar>
                        <columns>
                            <Column>
                                <Text text="{i18n>id}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>name}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>description}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>releaseDate}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>discontinuedDate}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>rating}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>price}" />
                            </Column>
                            <Column>
                                <Text text="{i18n>actionColumn}" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <HBox>
                                    <Text text="{ODataV4>ID}" />
                                </HBox>
                                <HBox>
                                    <Text text="{ODataV4>Name}" />
                                </HBox>
                                <HBox>
                                    <Text text="{ODataV4>Description}" />
                                </HBox>
                                <HBox>
                                    <Text text="{ODataV4>ReleaseDate}" />
                                </HBox>
                                <HBox>
                                    <Text text="{ODataV4>DiscontinuedDate}" />
                                </HBox>
                                <HBox>
                                    <Text text="{ODataV4>Rating}" />
                                </HBox>
                                <HBox>
                                    <Text text="{ODataV4>Price}" />
                                </HBox>
                                 <HBox>
                                    <Button text="Edit Record" press=".onEditV4ModelRecord"/>
                                </HBox>
                            </ColumnListItem>
                        </items>
                    </Table>
                </IconTabFilter>
            </items>
        </IconTabBar>
    </Page>
</mvc:View>
