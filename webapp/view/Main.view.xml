<mvc:View
    xmlns:core="sap.ui.core"
    controllerName="project1.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
>
    <Page>
        <Table
            id="bookTable"
            mode="MultiSelect"
            items="{
        path: 'bookData>/books'
    }"
        >
            <headerToolbar>
                <Toolbar>
                    <Title text="{i18n>bookList}" />
                    <Button
                        text="{i18n>addRecord}"
                        press=".onOpenAddRecordDialog"
                    />
                    <Button
                        text="{i18n>deleteRecord}"
                        press=".onOpenDeleteDialog"
                    />

                    <Input
                        id="searchInput"
                        width="40%"
                    />

                    <Select
                        id="genreSelect"
                        items="{
                            path: 'gernes>/bookGenres'
                        }"
                        width="10%"
                    >
                        <core:Item
                            text="{gernes>key}"
                            key="{gernes>text}"
                        />
                    </Select>
                    <Button
                        text="{i18n>filter}"
                        press=".onApplyFilters"
                    />
                </Toolbar>
            </headerToolbar>
            <columns>
                <Column>
                    <Text text="{i18n>nameColumn}" />
                </Column>
                <Column>
                    <Text text="{i18n>authorColumn}" />
                </Column>
                <Column>
                    <Text text="{i18n>genreColumn}" />
                </Column>
                <Column>
                    <Text text="{i18n>releaseDateColumn}" />
                </Column>
                <Column>
                    <Text text="{i18n>availableColumn}" />
                </Column>
                <Column>
                    <Text text="{i18n>actionColumn}" />
                </Column>
            </columns>
            <items>
                <ColumnListItem>
                    <cells>
                        <HBox>
                            <Text
                                text="{bookData>name}"
                                visible="{= ${viewModel>/id} !== ${bookData>id} ? true : ${viewModel>/isVisible} ? false : true }"
                            />
                            <Input
                                value="{bookData>name}"
                                visible="{= ${viewModel>/isVisible} &amp;&amp; ${viewModel>/id} === ${bookData>id} }"
                            />
                        </HBox>
                        <HBox>
                            <Text text="{bookData>author}" />
                        </HBox>
                        <HBox>
                            <Text text="{bookData>genre}" />
                        </HBox>
                        <HBox>
                            <Text 
                            core:require="{
                                Formatter: 'project1/model/formatter'
                            }"
                            text="{
                                path: 'bookData>releasedate',
                                formatter: 'Formatter.formatDate.bind($controller)'
                            }" 
                            
                            />
                        </HBox>
                        <HBox>
                            <Text text="{bookData>availablequantity}" />
                        </HBox>
                        <HBox>
                            <Button
                                text="{= ${viewModel>/isVisible} ? ${viewModel>/id} === ${bookData>id} ? 'Save Title' : 'Edit Title'  : 'Edit Title'}"
                                press=".onEditTitle"
                            />
                        </HBox>
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
    </Page>
    <ToolbarSeparator />
</mvc:View>